{"id":"views/pages/editProfile.js","dependencies":[{"name":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\package.json","includedInParent":true,"mtime":1649048711248},{"name":"./../../App","loc":{"line":1,"column":16,"index":16},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\App.js"},{"name":"lit-html","loc":{"line":2,"column":28,"index":59},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\node_modules\\lit-html\\lit-html.js"},{"name":"./../../Router","loc":{"line":3,"column":37,"index":108},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\Router.js"},{"name":"./../../Auth","loc":{"line":4,"column":17,"index":143},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\Auth.js"},{"name":"./../../Utils","loc":{"line":5,"column":18,"index":177},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\Utils.js"},{"name":"./../../UserAPI","loc":{"line":6,"column":20,"index":214},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\UserAPI.js"},{"name":"../../Toast","loc":{"line":7,"column":18,"index":251},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\Toast.js"},{"name":"moment","loc":{"line":8,"column":19,"index":285},"parent":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\src\\views\\pages\\editProfile.js","resolved":"C:\\Users\\natal\\Documents\\GitHub\\essence-frontend\\node_modules\\moment\\moment.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _App = _interopRequireDefault(require(\"./../../App\"));\n\nvar _litHtml = require(\"lit-html\");\n\nvar _Router = require(\"./../../Router\");\n\nvar _Auth = _interopRequireDefault(require(\"./../../Auth\"));\n\nvar _Utils = _interopRequireDefault(require(\"./../../Utils\"));\n\nvar _UserAPI = _interopRequireDefault(require(\"./../../UserAPI\"));\n\nvar _Toast = _interopRequireDefault(require(\"../../Toast\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nclass EditProfileView {\n  init() {\n    console.log('EditProfileView.init');\n    document.title = 'Edit Profile';\n    this.user = null;\n    this.render();\n\n    _Utils.default.pageIntroAnim();\n\n    this.getUser();\n  }\n\n  async getUser() {\n    try {\n      this.user = await _UserAPI.default.getUser(_Auth.default.currentUser._id);\n      this.render();\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n  }\n\n  async updateProfileSubmitHandler(e) {\n    e.preventDefault();\n    const formData = e.detail.formData;\n    const submitBtn = document.querySelector('.submit-btn');\n    submitBtn.setAttribute('loading', '');\n\n    try {\n      const updatedUser = await _UserAPI.default.updateUser(_Auth.default.currentUser._id, formData);\n      delete updatedUser.password;\n      this.user = updatedUser;\n      _Auth.default.currentUser = updatedUser;\n      this.render();\n\n      _Toast.default.show('profile updated');\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n\n    submitBtn.removeAttribute('loading');\n  }\n\n  render() {\n    const template = (0, _litHtml.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <va-app-header title=\\\"Edit Profile\\\" user=\", \"></va-app-header>\\n      <div class=\\\"page-content\\\">        \\n        \", \"\\n      </div>\\n    \"])), JSON.stringify(_Auth.default.currentUser), this.user == null ? (0, _litHtml.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n          <sl-spinner></sl-spinner>\\n        \"]))) : (0, _litHtml.html)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n          <h1>Teacher's Lounge</h1>\\n          <p>Updated: \", \"</p>\\n          <sl-form class=\\\"page-form\\\" @sl-submit=\", \">\\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"Last name\\\" type=\\\"text\\\" name=\\\"firstName\\\" value=\\\"\", \"\\\" placeholder=\\\"First Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"First name\\\" type=\\\"text\\\" name=\\\"lastName\\\" value=\\\"\", \"\\\" placeholder=\\\"Last Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input label=\\\"Email\\\" type=\\\"text\\\" name=\\\"email\\\" value=\\\"\", \"\\\" placeholder=\\\"Email Address\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-textarea name=\\\"bio\\\" resize=\\\"auto\\\" value=\\\"\", \"\\\" label=\\\"Add your bio here\\\"></sl-textarea>\\n            </div>            \\n            <div class=\\\"input-group\\\">\\n              <label>Avatar</label><br>          \\n              \", \"\\n            </div>\\n            <sl-button type=\\\"primary\\\" class=\\\"submit-btn\\\" submit pill style=\\\"width: 250px\\\">Update Profile</sl-button>\\n          </sl-form>\\n        \"])), (0, _moment.default)(_Auth.default.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a'), this.updateProfileSubmitHandler.bind(this), this.user.firstName, this.user.lastName, this.user.email, this.user.bio, this.user.avatar ? (0, _litHtml.html)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n                <sl-avatar image=\\\"\", \"/images/\", \"\\\"></sl-avatar>\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"])), _App.default.apiBase, this.user.avatar) : (0, _litHtml.html)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"])))));\n    (0, _litHtml.render)(template, _App.default.rootEl);\n  }\n\n}\n\nvar _default = new EditProfileView();\n\nexports.default = _default;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"views/pages/editProfile.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"views/pages/editProfile.js","original":{"line":2,"column":0}},{"generated":{"line":12,"column":0},"source":"views/pages/editProfile.js","original":{"line":3,"column":0}},{"generated":{"line":14,"column":0},"source":"views/pages/editProfile.js","original":{"line":4,"column":0}},{"generated":{"line":16,"column":0},"source":"views/pages/editProfile.js","original":{"line":5,"column":0}},{"generated":{"line":18,"column":0},"source":"views/pages/editProfile.js","original":{"line":6,"column":0}},{"generated":{"line":20,"column":0},"source":"views/pages/editProfile.js","original":{"line":7,"column":0}},{"generated":{"line":22,"column":0},"source":"views/pages/editProfile.js","original":{"line":8,"column":0}},{"generated":{"line":30,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"name":"EditProfileView","generated":{"line":30,"column":6},"source":"views/pages/editProfile.js","original":{"line":10,"column":6}},{"generated":{"line":30,"column":21},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"generated":{"line":30,"column":22},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"name":"init","generated":{"line":31,"column":0},"source":"views/pages/editProfile.js","original":{"line":11,"column":2}},{"name":"init","generated":{"line":31,"column":2},"source":"views/pages/editProfile.js","original":{"line":11,"column":2}},{"generated":{"line":31,"column":6},"source":"views/pages/editProfile.js","original":{"line":11,"column":6}},{"generated":{"line":31,"column":9},"source":"views/pages/editProfile.js","original":{"line":11,"column":8}},{"name":"console","generated":{"line":32,"column":0},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"name":"console","generated":{"line":32,"column":4},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":11},"source":"views/pages/editProfile.js","original":{"line":12,"column":11}},{"name":"log","generated":{"line":32,"column":12},"source":"views/pages/editProfile.js","original":{"line":12,"column":12}},{"generated":{"line":32,"column":15},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":16},"source":"views/pages/editProfile.js","original":{"line":12,"column":16}},{"generated":{"line":32,"column":38},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"name":"document","generated":{"line":33,"column":0},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"name":"document","generated":{"line":33,"column":4},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":33,"column":12},"source":"views/pages/editProfile.js","original":{"line":13,"column":12}},{"name":"title","generated":{"line":33,"column":13},"source":"views/pages/editProfile.js","original":{"line":13,"column":13}},{"generated":{"line":33,"column":18},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":33,"column":21},"source":"views/pages/editProfile.js","original":{"line":13,"column":21}},{"generated":{"line":33,"column":35},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":34,"column":0},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"name":"user","generated":{"line":34,"column":9},"source":"views/pages/editProfile.js","original":{"line":14,"column":9}},{"generated":{"line":34,"column":13},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":34,"column":16},"source":"views/pages/editProfile.js","original":{"line":14,"column":16}},{"generated":{"line":34,"column":20},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":35,"column":0},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"name":"render","generated":{"line":35,"column":9},"source":"views/pages/editProfile.js","original":{"line":15,"column":9}},{"generated":{"line":35,"column":15},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"name":"Utils","generated":{"line":37,"column":0},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"name":"pageIntroAnim","generated":{"line":37,"column":19},"source":"views/pages/editProfile.js","original":{"line":16,"column":10}},{"generated":{"line":37,"column":32},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"generated":{"line":39,"column":0},"source":"views/pages/editProfile.js","original":{"line":17,"column":4}},{"name":"getUser","generated":{"line":39,"column":9},"source":"views/pages/editProfile.js","original":{"line":17,"column":9}},{"generated":{"line":39,"column":16},"source":"views/pages/editProfile.js","original":{"line":17,"column":4}},{"generated":{"line":40,"column":0},"source":"views/pages/editProfile.js","original":{"line":18,"column":3}},{"generated":{"line":42,"column":0},"source":"views/pages/editProfile.js","original":{"line":20,"column":15}},{"name":"getUser","generated":{"line":42,"column":8},"source":"views/pages/editProfile.js","original":{"line":20,"column":8}},{"generated":{"line":42,"column":15},"source":"views/pages/editProfile.js","original":{"line":20,"column":15}},{"generated":{"line":42,"column":18},"source":"views/pages/editProfile.js","original":{"line":20,"column":17}},{"generated":{"line":43,"column":0},"source":"views/pages/editProfile.js","original":{"line":21,"column":4}},{"generated":{"line":43,"column":8},"source":"views/pages/editProfile.js","original":{"line":21,"column":8}},{"generated":{"line":44,"column":0},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"name":"user","generated":{"line":44,"column":11},"source":"views/pages/editProfile.js","original":{"line":22,"column":11}},{"generated":{"line":44,"column":15},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":44,"column":18},"source":"views/pages/editProfile.js","original":{"line":22,"column":18}},{"name":"UserAPI","generated":{"line":44,"column":24},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"name":"getUser","generated":{"line":44,"column":41},"source":"views/pages/editProfile.js","original":{"line":22,"column":32}},{"generated":{"line":44,"column":48},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"name":"Auth","generated":{"line":44,"column":49},"source":"views/pages/editProfile.js","original":{"line":22,"column":40}},{"name":"currentUser","generated":{"line":44,"column":63},"source":"views/pages/editProfile.js","original":{"line":22,"column":45}},{"generated":{"line":44,"column":74},"source":"views/pages/editProfile.js","original":{"line":22,"column":40}},{"name":"_id","generated":{"line":44,"column":75},"source":"views/pages/editProfile.js","original":{"line":22,"column":57}},{"generated":{"line":44,"column":78},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"generated":{"line":44,"column":79},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":45,"column":0},"source":"views/pages/editProfile.js","original":{"line":23,"column":6}},{"name":"render","generated":{"line":45,"column":11},"source":"views/pages/editProfile.js","original":{"line":23,"column":11}},{"generated":{"line":45,"column":17},"source":"views/pages/editProfile.js","original":{"line":23,"column":6}},{"generated":{"line":46,"column":0},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"generated":{"line":46,"column":5},"source":"views/pages/editProfile.js","original":{"line":21,"column":4}},{"generated":{"line":46,"column":6},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"name":"err","generated":{"line":46,"column":13},"source":"views/pages/editProfile.js","original":{"line":24,"column":11}},{"generated":{"line":46,"column":16},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"generated":{"line":46,"column":18},"source":"views/pages/editProfile.js","original":{"line":24,"column":15}},{"name":"Toast","generated":{"line":47,"column":0},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"name":"show","generated":{"line":47,"column":21},"source":"views/pages/editProfile.js","original":{"line":25,"column":12}},{"generated":{"line":47,"column":25},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"name":"err","generated":{"line":47,"column":26},"source":"views/pages/editProfile.js","original":{"line":25,"column":17}},{"generated":{"line":47,"column":29},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"generated":{"line":47,"column":31},"source":"views/pages/editProfile.js","original":{"line":25,"column":22}},{"generated":{"line":47,"column":38},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"generated":{"line":48,"column":0},"source":"views/pages/editProfile.js","original":{"line":26,"column":5}},{"generated":{"line":49,"column":0},"source":"views/pages/editProfile.js","original":{"line":27,"column":3}},{"generated":{"line":51,"column":0},"source":"views/pages/editProfile.js","original":{"line":29,"column":34}},{"name":"updateProfileSubmitHandler","generated":{"line":51,"column":8},"source":"views/pages/editProfile.js","original":{"line":29,"column":8}},{"generated":{"line":51,"column":34},"source":"views/pages/editProfile.js","original":{"line":29,"column":34}},{"name":"e","generated":{"line":51,"column":35},"source":"views/pages/editProfile.js","original":{"line":29,"column":35}},{"generated":{"line":51,"column":36},"source":"views/pages/editProfile.js","original":{"line":29,"column":34}},{"generated":{"line":51,"column":38},"source":"views/pages/editProfile.js","original":{"line":29,"column":37}},{"name":"e","generated":{"line":52,"column":0},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"name":"e","generated":{"line":52,"column":4},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":52,"column":5},"source":"views/pages/editProfile.js","original":{"line":30,"column":5}},{"name":"preventDefault","generated":{"line":52,"column":6},"source":"views/pages/editProfile.js","original":{"line":30,"column":6}},{"generated":{"line":52,"column":20},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":53,"column":0},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"name":"formData","generated":{"line":53,"column":10},"source":"views/pages/editProfile.js","original":{"line":31,"column":10}},{"generated":{"line":53,"column":18},"source":"views/pages/editProfile.js","original":{"line":31,"column":18}},{"name":"e","generated":{"line":53,"column":21},"source":"views/pages/editProfile.js","original":{"line":31,"column":21}},{"generated":{"line":53,"column":22},"source":"views/pages/editProfile.js","original":{"line":31,"column":22}},{"name":"detail","generated":{"line":53,"column":23},"source":"views/pages/editProfile.js","original":{"line":31,"column":23}},{"generated":{"line":53,"column":29},"source":"views/pages/editProfile.js","original":{"line":31,"column":21}},{"name":"formData","generated":{"line":53,"column":30},"source":"views/pages/editProfile.js","original":{"line":31,"column":30}},{"generated":{"line":53,"column":38},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"generated":{"line":54,"column":0},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"name":"submitBtn","generated":{"line":54,"column":10},"source":"views/pages/editProfile.js","original":{"line":32,"column":10}},{"generated":{"line":54,"column":19},"source":"views/pages/editProfile.js","original":{"line":32,"column":19}},{"name":"document","generated":{"line":54,"column":22},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":54,"column":30},"source":"views/pages/editProfile.js","original":{"line":32,"column":30}},{"name":"querySelector","generated":{"line":54,"column":31},"source":"views/pages/editProfile.js","original":{"line":32,"column":31}},{"generated":{"line":54,"column":44},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":54,"column":45},"source":"views/pages/editProfile.js","original":{"line":32,"column":45}},{"generated":{"line":54,"column":58},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":54,"column":59},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"name":"submitBtn","generated":{"line":55,"column":0},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"name":"submitBtn","generated":{"line":55,"column":4},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":55,"column":13},"source":"views/pages/editProfile.js","original":{"line":33,"column":13}},{"name":"setAttribute","generated":{"line":55,"column":14},"source":"views/pages/editProfile.js","original":{"line":33,"column":14}},{"generated":{"line":55,"column":26},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":55,"column":27},"source":"views/pages/editProfile.js","original":{"line":33,"column":27}},{"generated":{"line":55,"column":36},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":55,"column":38},"source":"views/pages/editProfile.js","original":{"line":33,"column":38}},{"generated":{"line":55,"column":40},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":57,"column":0},"source":"views/pages/editProfile.js","original":{"line":34,"column":4}},{"generated":{"line":57,"column":8},"source":"views/pages/editProfile.js","original":{"line":34,"column":8}},{"generated":{"line":58,"column":0},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"name":"updatedUser","generated":{"line":58,"column":12},"source":"views/pages/editProfile.js","original":{"line":35,"column":12}},{"generated":{"line":58,"column":23},"source":"views/pages/editProfile.js","original":{"line":35,"column":23}},{"generated":{"line":58,"column":26},"source":"views/pages/editProfile.js","original":{"line":35,"column":26}},{"name":"UserAPI","generated":{"line":58,"column":32},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"updateUser","generated":{"line":58,"column":49},"source":"views/pages/editProfile.js","original":{"line":35,"column":40}},{"generated":{"line":58,"column":59},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"Auth","generated":{"line":58,"column":60},"source":"views/pages/editProfile.js","original":{"line":35,"column":51}},{"name":"currentUser","generated":{"line":58,"column":74},"source":"views/pages/editProfile.js","original":{"line":35,"column":56}},{"generated":{"line":58,"column":85},"source":"views/pages/editProfile.js","original":{"line":35,"column":51}},{"name":"_id","generated":{"line":58,"column":86},"source":"views/pages/editProfile.js","original":{"line":35,"column":68}},{"generated":{"line":58,"column":89},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"formData","generated":{"line":58,"column":91},"source":"views/pages/editProfile.js","original":{"line":35,"column":73}},{"generated":{"line":58,"column":99},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"generated":{"line":58,"column":100},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"generated":{"line":59,"column":0},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"name":"updatedUser","generated":{"line":59,"column":13},"source":"views/pages/editProfile.js","original":{"line":36,"column":13}},{"generated":{"line":59,"column":24},"source":"views/pages/editProfile.js","original":{"line":36,"column":24}},{"name":"password","generated":{"line":59,"column":25},"source":"views/pages/editProfile.js","original":{"line":36,"column":25}},{"generated":{"line":59,"column":33},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"generated":{"line":60,"column":0},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"user","generated":{"line":60,"column":11},"source":"views/pages/editProfile.js","original":{"line":37,"column":11}},{"generated":{"line":60,"column":15},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"updatedUser","generated":{"line":60,"column":18},"source":"views/pages/editProfile.js","original":{"line":37,"column":18}},{"generated":{"line":60,"column":29},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"Auth","generated":{"line":61,"column":0},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"name":"currentUser","generated":{"line":61,"column":20},"source":"views/pages/editProfile.js","original":{"line":38,"column":11}},{"generated":{"line":61,"column":31},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"name":"updatedUser","generated":{"line":61,"column":34},"source":"views/pages/editProfile.js","original":{"line":38,"column":25}},{"generated":{"line":61,"column":45},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"generated":{"line":62,"column":0},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"name":"render","generated":{"line":62,"column":11},"source":"views/pages/editProfile.js","original":{"line":39,"column":11}},{"generated":{"line":62,"column":17},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"name":"Toast","generated":{"line":64,"column":0},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"name":"show","generated":{"line":64,"column":21},"source":"views/pages/editProfile.js","original":{"line":40,"column":12}},{"generated":{"line":64,"column":25},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"generated":{"line":64,"column":26},"source":"views/pages/editProfile.js","original":{"line":40,"column":17}},{"generated":{"line":64,"column":43},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"generated":{"line":65,"column":0},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"generated":{"line":65,"column":5},"source":"views/pages/editProfile.js","original":{"line":34,"column":4}},{"generated":{"line":65,"column":6},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"name":"err","generated":{"line":65,"column":13},"source":"views/pages/editProfile.js","original":{"line":41,"column":11}},{"generated":{"line":65,"column":16},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"generated":{"line":65,"column":18},"source":"views/pages/editProfile.js","original":{"line":41,"column":15}},{"name":"Toast","generated":{"line":66,"column":0},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"name":"show","generated":{"line":66,"column":21},"source":"views/pages/editProfile.js","original":{"line":42,"column":12}},{"generated":{"line":66,"column":25},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"name":"err","generated":{"line":66,"column":26},"source":"views/pages/editProfile.js","original":{"line":42,"column":17}},{"generated":{"line":66,"column":29},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"generated":{"line":66,"column":31},"source":"views/pages/editProfile.js","original":{"line":42,"column":22}},{"generated":{"line":66,"column":38},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"generated":{"line":67,"column":0},"source":"views/pages/editProfile.js","original":{"line":43,"column":5}},{"name":"submitBtn","generated":{"line":69,"column":0},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"name":"submitBtn","generated":{"line":69,"column":4},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":69,"column":13},"source":"views/pages/editProfile.js","original":{"line":44,"column":13}},{"name":"removeAttribute","generated":{"line":69,"column":14},"source":"views/pages/editProfile.js","original":{"line":44,"column":14}},{"generated":{"line":69,"column":29},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":69,"column":30},"source":"views/pages/editProfile.js","original":{"line":44,"column":30}},{"generated":{"line":69,"column":39},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":70,"column":0},"source":"views/pages/editProfile.js","original":{"line":45,"column":3}},{"name":"render","generated":{"line":72,"column":0},"source":"views/pages/editProfile.js","original":{"line":47,"column":2}},{"name":"render","generated":{"line":72,"column":2},"source":"views/pages/editProfile.js","original":{"line":47,"column":2}},{"generated":{"line":72,"column":8},"source":"views/pages/editProfile.js","original":{"line":47,"column":8}},{"generated":{"line":72,"column":11},"source":"views/pages/editProfile.js","original":{"line":47,"column":10}},{"generated":{"line":73,"column":0},"source":"views/pages/editProfile.js","original":{"line":48,"column":4}},{"name":"template","generated":{"line":73,"column":10},"source":"views/pages/editProfile.js","original":{"line":48,"column":10}},{"generated":{"line":73,"column":18},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"name":"html","generated":{"line":73,"column":25},"source":"views/pages/editProfile.js","original":{"line":48,"column":21}},{"generated":{"line":73,"column":38},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"name":"JSON","generated":{"line":73,"column":259},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"generated":{"line":73,"column":263},"source":"views/pages/editProfile.js","original":{"line":49,"column":53}},{"name":"stringify","generated":{"line":73,"column":264},"source":"views/pages/editProfile.js","original":{"line":49,"column":54}},{"generated":{"line":73,"column":273},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"name":"Auth","generated":{"line":73,"column":274},"source":"views/pages/editProfile.js","original":{"line":49,"column":64}},{"name":"currentUser","generated":{"line":73,"column":288},"source":"views/pages/editProfile.js","original":{"line":49,"column":69}},{"generated":{"line":73,"column":299},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"generated":{"line":73,"column":300},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"generated":{"line":73,"column":302},"source":"views/pages/editProfile.js","original":{"line":51,"column":11}},{"name":"user","generated":{"line":73,"column":307},"source":"views/pages/editProfile.js","original":{"line":51,"column":16}},{"generated":{"line":73,"column":311},"source":"views/pages/editProfile.js","original":{"line":51,"column":11}},{"generated":{"line":73,"column":315},"source":"views/pages/editProfile.js","original":{"line":51,"column":24}},{"generated":{"line":73,"column":319},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"name":"html","generated":{"line":73,"column":326},"source":"views/pages/editProfile.js","original":{"line":51,"column":32}},{"generated":{"line":73,"column":339},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"name":"html","generated":{"line":73,"column":465},"source":"views/pages/editProfile.js","original":{"line":53,"column":10}},{"generated":{"line":73,"column":478},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1726},"source":"views/pages/editProfile.js","original":{"line":55,"column":24}},{"name":"Auth","generated":{"line":73,"column":1747},"source":"views/pages/editProfile.js","original":{"line":55,"column":31}},{"name":"currentUser","generated":{"line":73,"column":1761},"source":"views/pages/editProfile.js","original":{"line":55,"column":36}},{"generated":{"line":73,"column":1772},"source":"views/pages/editProfile.js","original":{"line":55,"column":31}},{"name":"updatedAt","generated":{"line":73,"column":1773},"source":"views/pages/editProfile.js","original":{"line":55,"column":48}},{"generated":{"line":73,"column":1782},"source":"views/pages/editProfile.js","original":{"line":55,"column":24}},{"name":"format","generated":{"line":73,"column":1784},"source":"views/pages/editProfile.js","original":{"line":55,"column":59}},{"generated":{"line":73,"column":1790},"source":"views/pages/editProfile.js","original":{"line":55,"column":24}},{"generated":{"line":73,"column":1791},"source":"views/pages/editProfile.js","original":{"line":55,"column":66}},{"generated":{"line":73,"column":1815},"source":"views/pages/editProfile.js","original":{"line":55,"column":24}},{"generated":{"line":73,"column":1816},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1818},"source":"views/pages/editProfile.js","original":{"line":56,"column":50}},{"name":"updateProfileSubmitHandler","generated":{"line":73,"column":1823},"source":"views/pages/editProfile.js","original":{"line":56,"column":55}},{"generated":{"line":73,"column":1849},"source":"views/pages/editProfile.js","original":{"line":56,"column":50}},{"name":"bind","generated":{"line":73,"column":1850},"source":"views/pages/editProfile.js","original":{"line":56,"column":82}},{"generated":{"line":73,"column":1854},"source":"views/pages/editProfile.js","original":{"line":56,"column":50}},{"generated":{"line":73,"column":1855},"source":"views/pages/editProfile.js","original":{"line":56,"column":87}},{"generated":{"line":73,"column":1859},"source":"views/pages/editProfile.js","original":{"line":56,"column":50}},{"generated":{"line":73,"column":1860},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1862},"source":"views/pages/editProfile.js","original":{"line":58,"column":80}},{"name":"user","generated":{"line":73,"column":1867},"source":"views/pages/editProfile.js","original":{"line":58,"column":85}},{"generated":{"line":73,"column":1871},"source":"views/pages/editProfile.js","original":{"line":58,"column":80}},{"name":"firstName","generated":{"line":73,"column":1872},"source":"views/pages/editProfile.js","original":{"line":58,"column":90}},{"generated":{"line":73,"column":1881},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1883},"source":"views/pages/editProfile.js","original":{"line":61,"column":80}},{"name":"user","generated":{"line":73,"column":1888},"source":"views/pages/editProfile.js","original":{"line":61,"column":85}},{"generated":{"line":73,"column":1892},"source":"views/pages/editProfile.js","original":{"line":61,"column":80}},{"name":"lastName","generated":{"line":73,"column":1893},"source":"views/pages/editProfile.js","original":{"line":61,"column":90}},{"generated":{"line":73,"column":1901},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1903},"source":"views/pages/editProfile.js","original":{"line":64,"column":72}},{"name":"user","generated":{"line":73,"column":1908},"source":"views/pages/editProfile.js","original":{"line":64,"column":77}},{"generated":{"line":73,"column":1912},"source":"views/pages/editProfile.js","original":{"line":64,"column":72}},{"name":"email","generated":{"line":73,"column":1913},"source":"views/pages/editProfile.js","original":{"line":64,"column":82}},{"generated":{"line":73,"column":1918},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1920},"source":"views/pages/editProfile.js","original":{"line":67,"column":61}},{"name":"user","generated":{"line":73,"column":1925},"source":"views/pages/editProfile.js","original":{"line":67,"column":66}},{"generated":{"line":73,"column":1929},"source":"views/pages/editProfile.js","original":{"line":67,"column":61}},{"name":"bio","generated":{"line":73,"column":1930},"source":"views/pages/editProfile.js","original":{"line":67,"column":71}},{"generated":{"line":73,"column":1933},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":1935},"source":"views/pages/editProfile.js","original":{"line":71,"column":17}},{"name":"user","generated":{"line":73,"column":1940},"source":"views/pages/editProfile.js","original":{"line":71,"column":22}},{"generated":{"line":73,"column":1944},"source":"views/pages/editProfile.js","original":{"line":71,"column":17}},{"name":"avatar","generated":{"line":73,"column":1945},"source":"views/pages/editProfile.js","original":{"line":71,"column":27}},{"generated":{"line":73,"column":1951},"source":"views/pages/editProfile.js","original":{"line":71,"column":16}},{"name":"html","generated":{"line":73,"column":1958},"source":"views/pages/editProfile.js","original":{"line":71,"column":37}},{"generated":{"line":73,"column":1971},"source":"views/pages/editProfile.js","original":{"line":71,"column":16}},{"name":"App","generated":{"line":73,"column":2185},"source":"views/pages/editProfile.js","original":{"line":72,"column":36}},{"name":"apiBase","generated":{"line":73,"column":2198},"source":"views/pages/editProfile.js","original":{"line":72,"column":40}},{"generated":{"line":73,"column":2205},"source":"views/pages/editProfile.js","original":{"line":71,"column":16}},{"generated":{"line":73,"column":2207},"source":"views/pages/editProfile.js","original":{"line":72,"column":58}},{"name":"user","generated":{"line":73,"column":2212},"source":"views/pages/editProfile.js","original":{"line":72,"column":63}},{"generated":{"line":73,"column":2216},"source":"views/pages/editProfile.js","original":{"line":72,"column":58}},{"name":"avatar","generated":{"line":73,"column":2217},"source":"views/pages/editProfile.js","original":{"line":72,"column":68}},{"generated":{"line":73,"column":2223},"source":"views/pages/editProfile.js","original":{"line":71,"column":16}},{"name":"html","generated":{"line":73,"column":2231},"source":"views/pages/editProfile.js","original":{"line":74,"column":17}},{"generated":{"line":73,"column":2244},"source":"views/pages/editProfile.js","original":{"line":71,"column":16}},{"generated":{"line":73,"column":2389},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":73,"column":2390},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"generated":{"line":73,"column":2391},"source":"views/pages/editProfile.js","original":{"line":48,"column":4}},{"generated":{"line":74,"column":0},"source":"views/pages/editProfile.js","original":{"line":83,"column":4}},{"name":"template","generated":{"line":74,"column":25},"source":"views/pages/editProfile.js","original":{"line":83,"column":11}},{"generated":{"line":74,"column":33},"source":"views/pages/editProfile.js","original":{"line":83,"column":4}},{"name":"App","generated":{"line":74,"column":35},"source":"views/pages/editProfile.js","original":{"line":83,"column":21}},{"name":"rootEl","generated":{"line":74,"column":48},"source":"views/pages/editProfile.js","original":{"line":83,"column":25}},{"generated":{"line":74,"column":54},"source":"views/pages/editProfile.js","original":{"line":83,"column":4}},{"generated":{"line":75,"column":0},"source":"views/pages/editProfile.js","original":{"line":84,"column":3}},{"generated":{"line":77,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"generated":{"line":79,"column":15},"source":"views/pages/editProfile.js","original":{"line":87,"column":15}},{"name":"EditProfileView","generated":{"line":79,"column":19},"source":"views/pages/editProfile.js","original":{"line":87,"column":19}},{"generated":{"line":79,"column":34},"source":"views/pages/editProfile.js","original":{"line":87,"column":15}}],"sources":{"views/pages/editProfile.js":"import App from './../../App'\r\nimport {html, render } from 'lit-html'\r\nimport {gotoRoute, anchorRoute} from './../../Router'\r\nimport Auth from './../../Auth'\r\nimport Utils from './../../Utils'\r\nimport UserAPI from './../../UserAPI'\r\nimport Toast from '../../Toast'\r\nimport moment from 'moment'\r\n\r\nclass EditProfileView {\r\n  init(){\r\n    console.log('EditProfileView.init')\r\n    document.title = 'Edit Profile'    \r\n    this.user = null\r\n    this.render()    \r\n    Utils.pageIntroAnim()\r\n    this.getUser()    \r\n  }\r\n\r\n  async getUser(){\r\n    try {\r\n      this.user = await UserAPI.getUser(Auth.currentUser._id)      \r\n      this.render()\r\n    }catch(err){\r\n      Toast.show(err, 'error')\r\n    }\r\n  }\r\n\r\n  async updateProfileSubmitHandler(e){\r\n    e.preventDefault()\r\n    const formData = e.detail.formData\r\n    const submitBtn = document.querySelector('.submit-btn')\r\n    submitBtn.setAttribute('loading', '')\r\n    try {\r\n      const updatedUser = await UserAPI.updateUser(Auth.currentUser._id, formData)      \r\n      delete updatedUser.password        \r\n      this.user = updatedUser     \r\n      Auth.currentUser = updatedUser\r\n      this.render()\r\n      Toast.show('profile updated')\r\n    }catch(err){      \r\n      Toast.show(err, 'error')\r\n    }\r\n    submitBtn.removeAttribute('loading')\r\n  }\r\n\r\n  render(){\r\n    const template = html`\r\n      <va-app-header title=\"Edit Profile\" user=${JSON.stringify(Auth.currentUser)}></va-app-header>\r\n      <div class=\"page-content\">        \r\n        ${(this.user == null) ? html`\r\n          <sl-spinner></sl-spinner>\r\n        `:html`\r\n          <h1>Teacher's Lounge</h1>\r\n          <p>Updated: ${moment(Auth.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a')}</p>\r\n          <sl-form class=\"page-form\" @sl-submit=${this.updateProfileSubmitHandler.bind(this)}>\r\n            <div class=\"input-group\">\r\n              <sl-input label=\"Last name\" type=\"text\" name=\"firstName\" value=\"${this.user.firstName}\" placeholder=\"First Name\"></sl-input>\r\n            </div>\r\n            <div class=\"input-group\">\r\n              <sl-input label=\"First name\" type=\"text\" name=\"lastName\" value=\"${this.user.lastName}\" placeholder=\"Last Name\"></sl-input>\r\n            </div>\r\n            <div class=\"input-group\">\r\n              <sl-input label=\"Email\" type=\"text\" name=\"email\" value=\"${this.user.email}\" placeholder=\"Email Address\"></sl-input>\r\n            </div>\r\n            <div class=\"input-group\">\r\n              <sl-textarea name=\"bio\" resize=\"auto\" value=\"${this.user.bio}\" label=\"Add your bio here\"></sl-textarea>\r\n            </div>            \r\n            <div class=\"input-group\">\r\n              <label>Avatar</label><br>          \r\n              ${(this.user.avatar) ? html`\r\n                <sl-avatar image=\"${App.apiBase}/images/${this.user.avatar}\"></sl-avatar>\r\n                <input type=\"file\" name=\"avatar\" />\r\n              `: html`\r\n                <input type=\"file\" name=\"avatar\" />\r\n              `}\r\n            </div>\r\n            <sl-button type=\"primary\" class=\"submit-btn\" submit pill style=\"width: 250px\">Update Profile</sl-button>\r\n          </sl-form>\r\n        `}\r\n      </div>\r\n    `\r\n    render(template, App.rootEl)\r\n  }\r\n}\r\n\r\nexport default new EditProfileView()"},"lineCount":null}},"error":null,"hash":"3218499f028a4b17650a1dd8419c0361","cacheData":{"env":{}}}